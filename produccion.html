<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Producción - Celestial Servicios</title>
    <style>
        :root {
             --primary-color: #50b8bf;
            --secondary-color: #fff;
            --text-color: #333;
        }

        body {
            margin: 0;
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .app {
            display: flex;
            min-height: 100vh;
            width: 100%;
        }

        /* Menú lateral sticky */
        .nav {
            width: 240px;
            background: var(--primary-color);
            color: white;
            padding: 20px;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            z-index: 100;
        }

        .nav-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
        }

        .nav-logo img {
            width: 30px;
        }

        .nav-list {
            list-style: none;
            padding: 0;
        }

        .nav-list li a{
            text-decoration: none;
            color: white;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 0;
            cursor: pointer;
            transition: background 0.3s;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
        }

        .nav-item.active {
            background: rgba(255,255,255,0.2);
            border-radius: 5px;
        }

        /* Contenido principal con scroll */
        .content {
            flex: 1;
            padding: 20px;
            background: var(--secondary-color);
            overflow-y: auto;
            min-height: 100vh;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .btn-primary:hover {
            background: #00796b;
        }

        .btn-edit {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 50%;
            cursor: pointer;
        }

        .table-header {
            display: grid;
            gap: 20px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .table-row {
            display: grid;
            gap: 20px;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        /* Estilos para los formularios modales */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            padding: 20px;
            z-index: 200;
        }

        .form-container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 400px;
            text-align: center;
            position: relative;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-input {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .btn-close {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-size: 24px;
            color: #777;
        }

        @media (max-width: 768px) {
            .app {
                flex-direction: column;
            }
            .nav {
                width: 100%;
                position: static;
                height: auto;
                overflow-y: visible;
            }
            .content {
                width: 100%;
                min-height: auto;
                overflow-y: visible;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Sidebar STICKY -->
        <nav class="nav">
            <div class="nav-logo">
                <img src="img/logo celestial.png" alt="Logo">
                <span>Celestial Servicios</span>
            </div>
            <ul class="nav-list">
                <li class="nav-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                    <a href="inicio.html">Inicio</a>
                </li>
                <li class="nav-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><circle cx="12" cy="12" r="10"></circle></svg>
                    <a href="entradas.html">Entradas</a>
                </li>
                <li class="nav-item active">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="8 6 15 12 8 18"></polyline></svg>
                    <a href="salidas.html">Salidas</a>
                </li>
                <li class="nav-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line></svg>
                    <a href="produccion.html">Produccion</a>
                </li>
                <li class="nav-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle><path d="M12 2v4"></path></svg>
                    <a href="inventario.html">Inventario</a>
                </li>
            </ul>
            <button class="btn-edit" style="position: sticky; bottom: 20px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
            </button>
        </nav>

        <!-- Content con scroll -->
        <main class="content">
            <h1>Produccion</h1>
            
            <!-- Botón para comenzar nueva producción -->
            <button class="btn-primary" onclick="showStartProductionForm()">Comenzar nueva produccion</button>

            <!-- Historial de producciones -->
            <div class="card">
                <h2>Historial de produccion</h2>
                <div class="table-header">
                    <div>Cofre id</div>
                    <div>Modelo</div>
                    <div>Costo total aprox</div>
                </div>
                <div class="table-row">
                    <div>01</div>
                    <div>Económico</div>
                    <div>$87.000</div>
                </div>
                <div class="table-row">
                    <div>02</div>
                    <div>Semi-lujo</div>
                    <div>$120.000</div>
                </div>
                <div class="table-row">
                    <div>03</div>
                    <div>Lujo</div>
                    <div>$200.000</div>
                </div>
                <!-- Muchos más registros para forzar el scroll -->
                <div class="table-row"><div>04</div><div>Económico</div><div>$87.000</div></div>
                <div class="table-row"><div>05</div><div>Semi-lujo</div><div>$120.000</div></div>
                <div class="table-row"><div>06</div><div>Lujo</div><div>$200.000</div></div>
                <div class="table-row"><div>07</div><div>Económico</div><div>$87.000</div></div>
                <div class="table-row"><div>08</div><div>Semi-lujo</div><div>$120.000</div></div>
                <div class="table-row"><div>09</div><div>Lujo</div><div>$200.000</div></div>
                <div class="table-row"><div>10</div><div>Económico</div><div>$87.000</div></div>
                <div class="table-row"><div>11</div><div>Semi-lujo</div><div>$120.000</div></div>
                <div class="table-row"><div>12</div><div>Lujo</div><div>$200.000</div></div>
            </div>

            <!-- Producción en tiempo real -->
            <div class="card">
                <h2>Produccion en tiempo real</h2>
                <div class="table-header">
                    <div>Cofre Id</div>
                    <div>Modelo</div>
                    <div>Etapa</div>
                    <div>Trabajador</div>
                    <div></div>
                </div>
                <div class="table-row">
                    <div>03</div>
                    <div>Económico</div>
                    <div>Lijado</div>
                    <div>Lisandro</div>
                    <div><button class="btn-primary" onclick="showNextStageForm()">Siguiente etapa</button></div>
                </div>
                <div class="table-row">
                    <div>04</div>
                    <div>Semi-lujo</div>
                    <div>Tapizado</div>
                    <div>Alex</div>
                    <div><button class="btn-primary" onclick="showNextStageForm()">Siguiente etapa</button></div>
                </div>
                <!-- Muchos más registros para forzar el scroll -->
                <div class="table-row"><div>05</div><div>Lujo</div><div>Pintura</div><div>Carlos</div><div><button class="btn-primary" onclick="showNextStageForm()">Siguiente etapa</button></div></div>
                <div class="table-row"><div>06</div><div>Económico</div><div>Ensamblaje</div><div>Maria</div><div><button class="btn-primary" onclick="showNextStageForm()">Siguiente etapa</button></div></div>
                <div class="table-row"><div>07</div><div>Semi-lujo</div><div>Lijado</div><div>Juan</div><div><button class="btn-primary" onclick="showNextStageForm()">Siguiente etapa</button></div></div>
                <div class="table-row"><div>08</div><div>Lujo</div><div>Tapizado</div><div>Laura</div><div><button class="btn-primary" onclick="showNextStageForm()">Siguiente etapa</button></div></div>
                <div class="table-row"><div>09</div><div>Económico</div><div>Pintura</div><div>Pedro</div><div><button class="btn-primary" onclick="showNextStageForm()">Siguiente etapa</button></div></div>
                <div class="table-row"><div>10</div><div>Semi-lujo</div><div>Ensamblaje</div><div>Sofia</div><div><button class="btn-primary" onclick="showNextStageForm()">Siguiente etapa</button></div></div>
            </div>
        </main>
    </div>

    <!-- Formulario para comenzar nueva producción -->
    <div class="overlay" id="startProductionOverlay">
        <div class="form-container">
            <span class="btn-close" onclick="closeStartProductionForm()">&times;</span>
            <h3>Formulario para comenzar nuevo cofre a produccion</h3>
            <div class="form-group">
                <label>Modelo del cofre:</label>
                <input type="text" class="form-input" placeholder="Semi-lujo">
            </div>
            <div class="form-group">
                <label>Trabajador:</label>
                <input type="text" class="form-input" placeholder="Luis P.">
            </div>
            <button class="btn-primary" onclick="submitStartProduction()">Comenzar produccion</button>
        </div>
    </div>

    <!-- Formulario para pasar a siguiente etapa -->
    <div class="overlay" id="nextStageOverlay">
        <div class="form-container">
            <span class="btn-close" onclick="closeNextStageForm()">&times;</span>
            <h3>Ille este formulario antes de pasar a la siguiente etapa</h3>
            <div class="form-group">
                <label>Materias primas usadas:</label>
                <input type="text" class="form-input" id="rawMaterials" placeholder="Madera 50×50, Pintura negra Pintuco">
            </div>
            <div class="form-group">
                <label>Cantidad:</label>
                <input type="number" class="form-input" id="amountRawMaterials" placeholder="8">
            </div>
            <div class="form-group">
                <label>Trabajador:</label>
                <input type="text" class="form-input" id="worker" placeholder="...">
            </div>
            <button class="btn-primary" onclick="addRawMaterial()">Agregar materia prima</button>
            <button class="btn-primary" onclick="submitNextStage()">pasar a la siguiente etapa</button>
        </div>
    </div>

    <script>
        const nextStageOverlay = document.getElementById('nextStageOverlay');


        function showStartProductionForm() {
            document.getElementById('startProductionOverlay').style.display = 'flex';
        }

        function closeStartProductionForm() {
            document.getElementById('startProductionOverlay').style.display = 'none';
        }

        function showNextStageForm() {
            document.getElementById('nextStageOverlay').style.display = 'flex';
        }

        function closeNextStageForm() {
            document.getElementById('nextStageOverlay').style.display = 'none';
        }

        // Cerrar formularios al presionar Escape
        document.addEventListener('keydown', function(event) {
            if (event.key === "Escape") {
                closeStartProductionForm();
                closeNextStageForm();
            }
        });

        // Cerrar formularios al hacer clic fuera del formulario
        document.getElementById('startProductionOverlay').addEventListener('click', function(event) {
            if (event.target == this) {
                closeStartProductionForm();
            }
        });

        document.getElementById('nextStageOverlay').addEventListener('click', function(event) {
            if (event.target == this) {
                closeNextStageForm();
            }
        });

        function submitStartProduction() {
            alert('Producción iniciada exitosamente!');
            closeStartProductionForm();
        }

        function submitNextStage() {
            // No agregues otro objeto aquí, solo muestra la lista actual
            const materiasPrimas = valuesForm
            .map(item => `${item.rawMateria} (Cantidad: ${item.amount})`)
            .join('\n');
             alert(`Ha pasado a la siguiente etapa exitosamente.\nLas materias primas usadas son:\n${materiasPrimas}`);
            closeNextStageForm();
            // Limpia la lista para la próxima vez
             valuesForm = [];
        }
        
        //accion para agregar materias primas usadas a una lista
        let valuesForm = [];
        function addRawMaterial(){
            const rawMaterialInput = nextStageOverlay.querySelector('#rawMaterials');
            const amountInputs = nextStageOverlay.querySelector('#amountRawMaterials');
            
            
            
            
            valuesForm.push({rawMateria: rawMaterialInput.value, amount: amountInputs.value })

            //vaciar los inputs luego del click
            rawMaterialInput.value = '';
            amountInputs.value = '';
                    

            return valuesForm
            
        }
    </script>
</body>
</html>